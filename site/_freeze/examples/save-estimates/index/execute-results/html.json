{
  "hash": "110e89782e0f2b0add055fd03e13b323",
  "result": {
    "markdown": "---\n---\n\n\n\n\n\n\n\n\n# How to collect and export results\n\nThis example shows how to conveniently save and export your estimates using the `r(table)` matrix \nthat is now returned by each command.\n\n## Setup example data\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nuse https://raw.github.com/remlapmot/mrrobust/master/dodata, clear\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n\n```\n:::\n:::\n\n\nSelect observations (p-value with exposure < 10^-8^)\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\ngen byte sel1 = (ldlcp2 < 1e-8)\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n\n```\n:::\n:::\n\n\n## Fit estimators - collecting results using `r(table)` matrix {#fit}\n\nIVW (with fixed effect standard errors)\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1, ivw fe\nmat ivw = r(table)\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                      Number of genotypes = 73\n                                      Residual standard error constrained at 1\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nchdbeta      |\n    ldlcbeta |   .4815055    .038221    12.60   0.000     .4065938    .5564173\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nMR-Egger (with SEs using an unconstrained residual variance)\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1\nmat mregger = r(table)\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                      Number of genotypes = 73\n                                              Residual standard error =  1.548\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nchdbeta      |\n       slope |   .6173131   .1034573     5.97   0.000     .4145405    .8200858\n       _cons |  -.0087706   .0054812    -1.60   0.110    -.0195136    .0019723\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nMR-Egger using the radial formulation\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1, radial\nmat radial = r(table)\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                      Number of genotypes = 73\n                                              Residual standard error =  1.547\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nradialGD     |\n    radialGP |    .642582   .1157871     5.55   0.000     .4156434    .8695205\n       _cons |  -.5737301   .3545658    -1.62   0.106    -1.268666    .1212062\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nWeighted mode estimator\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nmrmodal chdbeta chdse ldlcbeta ldlcse if sel1==1, weighted\nmat mode = r(table)\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n                                                                       Phi = 1\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4789702   .0663145     7.22   0.000     .3489963    .6089441\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nWeighted median estimator\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nmrmedian chdbeta chdse ldlcbeta ldlcse if sel1==1, weighted\nmat median = r(table)\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4582573   .0653722     7.01   0.000     .3301302    .5863845\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\n## Combine and export results\n\nCheck our matrices\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmat dir\nmat list ivw\nmat list mregger\nmat list radial\nmat list mode\nmat list median\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n       median[9,1]\n         mode[9,1]\n       radial[9,2]\n      mregger[9,2]\n          ivw[9,1]\n\n\nivw[9,1]\n          chdbeta:\n         ldlcbeta\n     b  .48150551\n    se  .03822098\n     z  12.597937\npvalue  2.167e-36\n    ll  .40659377\n    ul  .55641726\n    df          .\n  crit   1.959964\n eform          0\n\n\nmregger[9,2]\n           chdbeta:    chdbeta:\n             slope       _cons\n     b   .61731315  -.00877065\n    se   .10345735   .00548118\n     z   5.9668371    -1.60014\npvalue   2.419e-09   .10956752\n    ll   .41454047  -.01951356\n    ul   .82008582   .00197226\n    df           .           .\n  crit    1.959964    1.959964\n eform           0           0\n\n\nradial[9,2]\n          radialGD:   radialGD:\n          radialGP       _cons\n     b   .64258196  -.57373006\n    se   .11578709   .35456584\n     z   5.5496858    -1.61812\npvalue   2.862e-08   .10563675\n    ll   .41564344  -1.2686663\n    ul   .86952048   .12120621\n    df           .           .\n  crit    1.959964    1.959964\n eform           0           0\n\n\nmode[9,1]\n             beta\n     b   .4789702\n    se  .06631445\n     z   7.222712\npvalue  5.096e-13\n    ll  .34899626\n    ul  .60894415\n    df          .\n  crit   1.959964\n eform          0\n\n\nmedian[9,1]\n             beta\n     b  .45825733\n    se   .0653722\n     z  7.0099725\npvalue  2.384e-12\n    ll  .33013017\n    ul  .58638448\n    df          .\n  crit   1.959964\n eform          0\n```\n:::\n:::\n\n\nCombined into single matrix\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nmat output = (ivw, mregger, radial, mode, median)\nmat colnames output = ivw_beta mregger_beta mregger_cons ///\n\tradial_beta radial_cons mode_beta median_beta\nmat coleq output = \"\" \"\" \"\" \"\" \"\" \"\" \"\"\nmat output = output'\nmat list output, format(%4.3f)\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\noutput[7,9]\n                   b      se       z  pvalue      ll      ul      df    crit   eform\n    ivw_beta   0.482   0.038  12.598   0.000   0.407   0.556       .   1.960   0.000\nmregger_beta   0.617   0.103   5.967   0.000   0.415   0.820       .   1.960   0.000\nmregger_cons  -0.009   0.005  -1.600   0.110  -0.020   0.002       .   1.960   0.000\n radial_beta   0.643   0.116   5.550   0.000   0.416   0.870       .   1.960   0.000\n radial_cons  -0.574   0.355  -1.618   0.106  -1.269   0.121       .   1.960   0.000\n   mode_beta   0.479   0.066   7.223   0.000   0.349   0.609       .   1.960   0.000\n median_beta   0.458   0.065   7.010   0.000   0.330   0.586       .   1.960   0.000\n```\n:::\n:::\n\n\nExport matrix to dataset\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\ndrop _all\nsvmat output, names(col)\nlocal rownames : rownames output\ndi \"`rownames'\"\ntokenize `rownames'\ngen str15 estimate = \"\"\nforvalues i = 1/7 {\n\treplace estimate = \"``i''\" in `i'\n}\n```\n:::\n\n\nShow dataset\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nlist estimate b se z pvalue ll ul, clean noobs\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n        estimate           b         se          z     pvalue          ll         ul  \n        ivw_beta    .4815055    .038221   12.59794   2.17e-36    .4065938   .5564172  \n    mregger_beta    .6173131   .1034573   5.966837   2.42e-09    .4145405   .8200858  \n    mregger_cons   -.0087707   .0054812   -1.60014   .1095675   -.0195136   .0019723  \n     radial_beta    .6425819   .1157871   5.549686   2.86e-08    .4156434   .8695205  \n     radial_cons   -.5737301   .3545658   -1.61812   .1056367   -1.268666   .1212062  \n       mode_beta    .4789702   .0663145   7.222712   5.10e-13    .3489963   .6089441  \n     median_beta    .4582573   .0653722   7.009973   2.38e-12    .3301302   .5863845  \n```\n:::\n:::\n\n\nSave dataset\n```stata\nsave myestimates, replace\n```\n\nExport as tab-delimited textfile\n```stata\nexport delimited using myestimates.txt, delimiter(tab) replace\n```\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}