{
  "hash": "bcd2d14dba6ec4a4ca9dece871580db4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Examples from helpfiles in the mrrobust package\n---\n\n\n\n\n\n\n\n\n\n\n## Install the mrrobust package\n\n```stata\nnet install github, from(\"https://haghish.github.io/github/\")\ngitget mrrobust\n```\n\n## Read in example data\n\nRead in example data from @do-natgen-2013.\n\n\n\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\nuse https://raw.github.com/remlapmot/mrrobust/master/dodata, clear\n```\n:::\n\n\n\n\nSelect observations (*p*-value with exposure < 10^-8^).\n\n\n\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\ngen byte sel1 = (ldlcp2 < 1e-8)\n```\n:::\n\n\n\n\n## mrforest examples\n\nForest plot of genotype specific IV estimates and IVW and MR-Egger estimates, \nlabelling the genotypes with their RSID.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrforest chdbeta chdse ldlcbeta ldlcse if sel1==1, ivid(rsid) ///\n    xlabel(-5,-4,-3,-2,-1,0,1,2,3,4,5)\nqui gr export mrforest.svg, width(600) replace\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Example forest plot of genotype specific IV estimates.](mrforest.svg){fig-align='center' fig-alt='Example forest plot of genotype specific IV estimates.'}\n:::\n:::\n\n\n\n\n## mregger examples\n\nUsing the data provided by @do-natgen-2013 \nrecreate from @bowden-genepi-2016 the Table 4, LDL-c \"All genetic variants\" estimates.\n\nIVW (with fixed effect standard errors, i.e. variance of residuals \n[residual variance] constrained to 1).\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1, ivw fe\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                      Residual standard error constrained at 1\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nchdbeta      |\n    ldlcbeta |   .4815055    .038221    12.60   0.000     .4065938    .5564173\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\nMR-Egger (with SEs using an unconstrained residual variance \n[multiplicative random effects]).\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                              Residual standard error =  1.548\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nchdbeta      |\n       slope |   .6173131   .1034573     5.97   0.000     .4145405    .8200858\n       _cons |  -.0087706   .0054812    -1.60   0.110    -.0195136    .0019723\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\nMR-Egger reporting I^2^~GX~ statistic and heterogeneity Q-test.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1, gxse(ldlcse) heterogi\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                           Q_GX statistic (weighted) = 3454.26\n                                         I^2_GX statistic (weighted) =  97.92%\n                                                      Number of genotypes = 73\n                                              Residual standard error =  1.548\n                Ruecker's Q for heterogeneity; chi2(71) = 170.11 (p =  0.0000)\n                             I-squared statistic = 58.3% (95% CI 45.8%, 67.8%)\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nchdbeta      |\n       slope |   .6173131   .1034573     5.97   0.000     .4145405    .8200858\n       _cons |  -.0087706   .0054812    -1.60   0.110    -.0195136    .0019723\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\nMR-Egger using a t-distribution for inference (p-values) & CI limits.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1, tdist\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                              Residual standard error =  1.548\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nchdbeta      |\n       slope |   .6173131   .1034573     5.97   0.000     .4110251    .8236012\n       _cons |  -.0087706   .0054812    -1.60   0.114    -.0196998    .0021585\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\nMR-Egger using the radial formulation.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1, radial\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                              Residual standard error =  1.547\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nradialGD     |\n    radialGP |    .642582   .1157871     5.55   0.000     .4156434    .8695205\n       _cons |  -.5737301   .3545658    -1.62   0.106    -1.268666    .1212062\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\nMR-Egger using the radial formulation and reporting heterogeneity (Rucker's) Q-test.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmregger chdbeta ldlcbeta [aw=1/(chdse^2)] if sel1==1, radial heterogi\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                              Residual standard error =  1.547\n                Ruecker's Q for heterogeneity; chi2(71) = 169.98 (p =  0.0000)\n                             I-squared statistic = 58.2% (95% CI 45.8%, 67.8%)\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nradialGD     |\n    radialGP |    .642582   .1157871     5.55   0.000     .4156434    .8695205\n       _cons |  -.5737301   .3545658    -1.62   0.106    -1.268666    .1212062\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\n## mreggersimex examples\n\nSIMEX suppressing bootstrapped SEs (for speed - remove the `noboot` option to obtain SEs).\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmreggersimex chdbeta ldlcbeta [aw=1/chdse^2] if sel1==1, gxse(ldlcse) seed(12345) noboot\nqui gr export mreggersimex-plot.svg, width(600) replace\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                                    Bootstrap replications = 0\n                                                  Simulation replications = 50\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       slope |   .6256194          .        .       .            .           .\n       _cons |  -.0089987          .        .       .            .           .\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![SIMEX plots for the MR-Egger model.](mreggersimex-plot.svg){fig-align='center' fig-alt='SIMEX plots for the MR-Egger model.'}\n:::\n:::\n\n\n\n\n## mreggerplot examples\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmreggerplot chdbeta chdse ldlcbeta ldlcse if sel1==1\nqui gr export mreggerplot.svg, width(600) replace\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Scatter plot showing the genotype summary level data points and the fitted MR-Egger model.](mreggerplot.svg){fig-align='center' fig-alt='Scatter plot showing the genotype summary level data points and the fitted MR-Egger model.'}\n:::\n:::\n\n\n\n\n## mrmedian examples\n\nWeighted median estimator.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrmedian chdbeta chdse ldlcbeta ldlcse if sel1==1, weighted\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4582573   .0633137     7.24   0.000     .3341648    .5823499\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\n## mrmodal examples\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrmodalplot chdbeta chdse ldlcbeta ldlcse if sel1==1, seed(12345) legend(pos(6))\nqui gr export mrmodalplot.svg, width(600) replace\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n                                                                     Phi = .25\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4198713   .2267297     1.85   0.064    -.0245107    .8642533\n------------------------------------------------------------------------------\n\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n                                                                      Phi = .5\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4218667   .1981169     2.13   0.033     .0335647    .8101688\n------------------------------------------------------------------------------\n\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n                                                                       Phi = 1\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4917353   .1356432     3.63   0.000     .2258796     .757591\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Densities of the IV estimates using different values of the phi parameter.](mrmodalplot.svg){fig-align='center' fig-alt='Densities of the IV estimates using different values of the phi parameter.'}\n:::\n:::\n\n\n\n\nSimple mode estimator.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrmodal chdbeta chdse ldlcbeta ldlcse if sel1==1\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n                                                                       Phi = 1\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4917353   .1276278     3.85   0.000     .2415894    .7418812\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\nWeighted mode estimator.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrmodal chdbeta chdse ldlcbeta ldlcse if sel1==1, weighted\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n                                                                       Phi = 1\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4789702   .0663145     7.22   0.000     .3489963    .6089441\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\nSimple mode estimator with NOME assumption.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrmodal chdbeta chdse ldlcbeta ldlcse if sel1==1, nome\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                      Number of genotypes = 73\n                                                           Replications = 1000\n                                                                       Phi = 1\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        beta |   .4917353   .1266936     3.88   0.000     .2434204    .7400501\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\n## mrfunnel examples\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrfunnel chdbeta chdse ldlcbeta ldlcse if sel1==1, xlrange(0 10) legend(pos(6))\nqui gr export mrfunnel.svg, width(600) replace\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Example funnel plot.](mrfunnel.svg){fig-align='center' fig-alt='Example funnel plot.'}\n:::\n:::\n\n\n\n\n## Leave one out analysis\n\nCreate a smaller subset of data.\n\n\n\n\n::: {.cell layout-align=\"center\" collectcode='true'}\n\n```{.stata .cell-code}\ngen byte sel2 = (ldlcp2 < 1e-25)\n```\n:::\n\n\n\n\nPerform leave one out analysis using the IVW estimator\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrleaveoneout chdbeta ldlcbeta if sel2==1, gyse(chdse) genotype(rsid) noprint\nqui gr export mrleaveoneout-plot-01.svg, width(600) replace\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Plot showing leave one (genotype) out at a time analysis for the IVW estimate.](mrleaveoneout-plot-01.svg){fig-align='center' fig-alt='Plot showing leave one (genotype) out at a time analysis for the IVW estimate.'}\n:::\n:::\n\n\n\n\nPerform leave one out analysis using MVMR collecting the estimate for LDL-c.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.stata .cell-code}\nmrleaveoneout chdbeta ldlcbeta hdlcbeta tgbeta if sel2==1, ///\n    method(mvmr) gyse(chdse) genotype(rsid) noprint\nqui gr export mrleaveoneout-plot-02.svg, width(600) replace\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Plot showing leave one (genotype) out at a time analysis for the MVMR estimate.](mrleaveoneout-plot-02.svg){fig-align='center' fig-alt='Plot showing leave one (genotype) out at a time analysis for the MVMR estimate.'}\n:::\n:::\n\n\n\n\n## References\n\n::: {#refs}\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}