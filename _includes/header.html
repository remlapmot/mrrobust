<header class="site-header">

<div class="wrapper">
    {%- assign default_paths = site.pages | map: "path" -%}
    {%- assign page_paths = site.header_pages | default: default_paths -%}
    {%- assign titles_size = site.pages | map: 'title' | join: '' | size -%}
    <a class="site-title" rel="author" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>

	<!-- This finds the current page so it can be highlighted. -->
	{% for entry in site.data.navigation %}
	{% capture fullurl %}{{ site.baseurl }}{{ entry.url }}{% endcapture %}
		{% if fullurl == page.url %}
			{% assign current_page = fullurl %}
			{% break %}
		{% elsif page.url contains fullurl %}
			{% assign current_page = fullurl %}
		{% endif %}
	{% endfor %}

	<!-- navbar from https://mycyberuniverse.com/en-gb/jekyll-bootstrap-dynamic-navigation-highlighting-active-element.html -->
	<nav id="navbar" class="collapse navbar-collapse">
		<ul class="nav navbar-nav">
			{% assign links = site.data.navigation %}
			{% for link in links %}
				{% assign class = nil %}
				{% if page.url contains link.url %}
					{% assign class = 'active' %}
				{% endif %}
				{% if link.sublinks %}
					<li class="dropdown {{ class }}">
						<a href="{{ site.url }}{{ site.baseurl }}{{ link.url }}" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{ link.title }} <span class="caret"></span></a>
						<ul class="dropdown-menu">
							{% for sublink in link.sublinks %}
								{% if sublink.title == 'separator' %}
									<li role="separator" class="divider"></li>
								{% else %}
									<li>
										<a href="{{ site.url }}{{ site.baseurl }}{{ sublink.url }}">{{ sublink.title }}</a>
									</li>
								{% endif %}
							{% endfor %}
						</ul>
					</li>
				{% else %}
					<li class="{{ class }}">
						<a href="{{ site.url }}{{ site.baseurl }}{{ link.url }}">{{ link.title }}</a>
					</li>
				{% endif %}
			{% endfor %}
		</ul>
	</nav>

</div>
</header>
